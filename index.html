<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>位置情報で画像切り替え</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>耶馬渓ツーリズム</h1>
    <img id="targetImage" src="images/yaba103.jpg" width="775" height="480">
    <script src="script.js"></script> <!-- JavaScript を読み込む -->

  <script>
    // 定期的に locID を Netlify Function から取得
    async function fetchLocID() {
      try {
        const response = await fetch('https://remotoguidesystem.netlify.app/.netlify/functions/getlocID');
        const data = await response.json();
        const locID = data.locID || "103"; // locID を取得、なければデフォルト

        // 画像の src を切り替え
        const image = document.getElementById("targetImage");
        image.src = `images/yaba${locID}.jpg`;
      } catch (error) {
        console.error('Failed to fetch locID:', error);
      }
    }

    // ページ読み込み時に locID を取得
    fetchLocID();

    // 定期的に locID を取得
    setInterval(fetchLocID, 5000); // 5秒ごとに更新
  </script>
</body>
</html>
